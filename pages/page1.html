<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Quem sou eu — Passo 1</title>

<style>
:root{
  --accent:#f07a00;
  --bg:#f6f7fb;
  --card:#ffffff;
  --bd:#e7e7e7;
  --text:#111;
  --muted:#666;
}
body{
  margin:0;
  font-family:Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
}
.wrap{
  max-width:960px;
  margin:auto;
  padding:16px;
}
.card{
  background:var(--card);
  border-radius:16px;
  padding:16px;
  box-shadow:0 6px 20px rgba(0,0,0,.06);
}
h1{margin:0 0 6px}
.muted{color:var(--muted);font-size:14px;line-height:1.4}

.step{margin:12px 0}
.bar{
  height:10px;
  background:#e9e9e9;
  border-radius:999px;
  overflow:hidden;
  margin-top:6px;
}
.fill{
  height:100%;
  width:25%;
  background:var(--accent);
}

.q{
  border:1px solid var(--bd);
  border-radius:14px;
  padding:12px;
  margin:12px 0;
}
.qtitle{
  font-weight:700;
  margin-bottom:8px;
}
.qtitle span{
  color:#888;
  margin-right:6px;
}

.opt{
  display:block;
  border:1px solid var(--bd);
  border-radius:12px;
  padding:12px;
  margin:6px 0;
  cursor:pointer;
  background:#fafafa;
}
.opt input{
  margin-right:10px;
  transform:scale(1.1);
}

.actions{
  display:flex;
  gap:10px;
  margin-top:16px;
  flex-wrap:wrap;
}
.btn{
  padding:14px;
  border-radius:12px;
  border:0;
  font-weight:700;
  cursor:pointer;
}
.btn-primary{
  background:var(--accent);
  color:#fff;
  flex:1;
  min-width:220px;
}
</style>
</head>

<body>
<div class="wrap">
<div class="card">

<h1>Quem sou eu</h1>
<p class="muted">
Escolha a alternativa que mais se repete em você ao longo da vida.
Não existe resposta certa ou errada.
</p>

<div class="step">
<b>Passo 1 de 4 — Motivações pessoais</b>
<div class="bar"><div class="fill"></div></div>
</div>

<form id="formP1">

<!-- 1 -->
<div class="q">
  <div class="qtitle"><span>1.</span>Me sinto mais satisfeito(a) quando:</div>
  <label class="opt"><input type="radio" name="P1_01" value="A"> Tudo está correto e bem feito</label>
  <label class="opt"><input type="radio" name="P1_01" value="B"> Sou reconhecido(a) pelo que entreguei</label>
  <label class="opt"><input type="radio" name="P1_01" value="C"> Sei que não vai dar problema depois</label>
</div>

<!-- 2 -->
<div class="q">
  <div class="qtitle"><span>2.</span>O que mais me motiva é:</div>
  <label class="opt"><input type="radio" name="P1_02" value="A"> Ter liberdade para escolher como fazer</label>
  <label class="opt"><input type="radio" name="P1_02" value="B"> Saber que alguém contou comigo</label>
  <label class="opt"><input type="radio" name="P1_02" value="C"> Entender bem antes de agir</label>
</div>

<!-- 3 -->
<div class="q">
  <div class="qtitle"><span>3.</span>Eu me sinto melhor quando:</div>
  <label class="opt"><input type="radio" name="P1_03" value="A"> O ambiente está tranquilo</label>
  <label class="opt"><input type="radio" name="P1_03" value="B"> Posso ser eu mesmo(a), sem fingir</label>
  <label class="opt"><input type="radio" name="P1_03" value="C"> Tenho controle da situação</label>
</div>

<!-- 4 -->
<div class="q">
  <div class="qtitle"><span>4.</span>Eu valorizo mais:</div>
  <label class="opt"><input type="radio" name="P1_04" value="A"> Previsibilidade e clareza</label>
  <label class="opt"><input type="radio" name="P1_04" value="B"> Organização e padrão</label>
  <label class="opt"><input type="radio" name="P1_04" value="C"> Resultado e desempenho</label>
</div>

<!-- 5 -->
<div class="q">
  <div class="qtitle"><span>5.</span>Eu me dedico mais quando:</div>
  <label class="opt"><input type="radio" name="P1_05" value="A"> Confiam em mim para ajudar</label>
  <label class="opt"><input type="radio" name="P1_05" value="B"> Tenho autonomia para decidir</label>
  <label class="opt"><input type="radio" name="P1_05" value="C"> Posso trabalhar focado(a)</label>
</div>

<!-- 6 -->
<div class="q">
  <div class="qtitle"><span>6.</span>Eu costumo ser mais:</div>
  <label class="opt"><input type="radio" name="P1_06" value="A"> Sensível e intenso(a)</label>
  <label class="opt"><input type="radio" name="P1_06" value="B"> Entusiasmado(a) e cheio(a) de ideias</label>
  <label class="opt"><input type="radio" name="P1_06" value="C"> Tranquilo(a) e adaptável</label>
</div>

<!-- 7 -->
<div class="q">
  <div class="qtitle"><span>7.</span>Eu me sinto valorizado(a) quando:</div>
  <label class="opt"><input type="radio" name="P1_07" value="A"> Reconhecem minhas entregas</label>
  <label class="opt"><input type="radio" name="P1_07" value="B"> Me passam confiança e respaldo</label>
  <label class="opt"><input type="radio" name="P1_07" value="C"> Reconhecem meu senso de responsabilidade</label>
</div>

<!-- 8 -->
<div class="q">
  <div class="qtitle"><span>8.</span>Quando surge um problema:</div>
  <label class="opt"><input type="radio" name="P1_08" value="A"> Paro para analisar antes</label>
  <label class="opt"><input type="radio" name="P1_08" value="B"> Vou direto resolver</label>
  <label class="opt"><input type="radio" name="P1_08" value="C"> Tento aliviar a situação e seguir em frente</label>
</div>

<!-- 9 -->
<div class="q">
  <div class="qtitle"><span>9.</span>Eu me considero mais:</div>
  <label class="opt"><input type="radio" name="P1_09" value="A"> Sempre disponível para ajudar</label>
  <label class="opt"><input type="radio" name="P1_09" value="B"> Evito conflito e confusão</label>
  <label class="opt"><input type="radio" name="P1_09" value="C"> Não gosto de ser igual aos outros</label>
</div>

<!-- 10 -->
<div class="q">
  <div class="qtitle"><span>10.</span>Quando preciso escolher, prefiro:</div>
  <label class="opt"><input type="radio" name="P1_10" value="A"> O que traz mais segurança</label>
  <label class="opt"><input type="radio" name="P1_10" value="B"> O que gera mais resultado</label>
  <label class="opt"><input type="radio" name="P1_10" value="C"> O que é mais correto</label>
</div>

<!-- 11 -->
<div class="q">
  <div class="qtitle"><span>11.</span>No dia a dia, eu busco mais:</div>
  <label class="opt"><input type="radio" name="P1_11" value="A"> Variar a rotina e fazer coisas diferentes</label>
  <label class="opt"><input type="radio" name="P1_11" value="B"> Me preparar bem antes de agir</label>
  <label class="opt"><input type="radio" name="P1_11" value="C"> Estar próximo(a) das pessoas</label>
</div>

<!-- 12 -->
<div class="q">
  <div class="qtitle"><span>12.</span>Eu me sinto melhor quando:</div>
  <label class="opt"><input type="radio" name="P1_12" value="A"> Tenho a palavra final</label>
  <label class="opt"><input type="radio" name="P1_12" value="B"> Me sinto compreendido(a)</label>
  <label class="opt"><input type="radio" name="P1_12" value="C"> Não estou sendo pressionado(a)</label>
</div>

<!-- 13 -->
<div class="q">
  <div class="qtitle"><span>13.</span>No trabalho, eu tendo a:</div>
  <label class="opt"><input type="radio" name="P1_13" value="A"> Corrigir o que está fora do padrão</label>
  <label class="opt"><input type="radio" name="P1_13" value="B"> Conferir várias vezes antes de liberar</label>
  <label class="opt"><input type="radio" name="P1_13" value="C"> Acelerar para entregar mais resultado</label>
</div>

<!-- 14 -->
<div class="q">
  <div class="qtitle"><span>14.</span>Eu valorizo quando:</div>
  <label class="opt"><input type="radio" name="P1_14" value="A"> As pessoas se ajudam de verdade</label>
  <label class="opt"><input type="radio" name="P1_14" value="B"> Alguém assume a decisão</label>
  <label class="opt"><input type="radio" name="P1_14" value="C"> O ambiente é leve e flexível</label>
</div>

<!-- 15 -->
<div class="q">
  <div class="qtitle"><span>15.</span>Eu me desmotivo mais quando:</div>
  <label class="opt"><input type="radio" name="P1_15" value="A"> Me cobram sem eu estar preparado(a)</label>
  <label class="opt"><input type="radio" name="P1_15" value="B"> Me sinto vazio(a) ou incompreendido(a)</label>
  <label class="opt"><input type="radio" name="P1_15" value="C"> O ambiente fica pesado ou tenso</label>
</div>

<div class="actions">
  <button type="button" id="btnNext" class="btn btn-primary">Continuar</button>
</div>

</form>
</div>
</div>

<script>
const RESPOSTAS_KEY = "respostas";
const LEAD_KEY = "atrius_eneagrama_lead_v1";

function getRespostas(){
  try{ return JSON.parse(localStorage.getItem(RESPOSTAS_KEY)) || []; }
  catch{ return []; }
}
function setRespostas(r){
  localStorage.setItem(RESPOSTAS_KEY, JSON.stringify(r));
}

function getLead(){
  try{
    const l = localStorage.getItem(LEAD_KEY);
    return l ? JSON.parse(l) : null;
  }catch{ return null; }
}

function save(pergunta, alternativa){
  const r = getRespostas();
  const i = r.findIndex(x => x.pergunta === pergunta);
  if(i >= 0) r[i].alternativa = alternativa;
  else r.push({ pergunta, alternativa });
  setRespostas(r);
}

function restore(){
  getRespostas().forEach(r => {
    const el = document.querySelector(`input[name="${r.pergunta}"][value="${r.alternativa}"]`);
    if(el) el.checked = true;
  });
}

function validate(){
  const names = [...new Set(
    [...document.querySelectorAll('input[type=radio]')].map(i => i.name)
  )];
  const ok = names.every(n => document.querySelector(`input[name="${n}"]:checked`));
  if(!ok){
    alert("Responda todas as questões para continuar.");
    const firstMissing = names.find(n => !document.querySelector(`input[name="${n}"]:checked`));
    const firstEl = document.querySelector(`input[name="${firstMissing}"]`);
    if(firstEl) firstEl.scrollIntoView({ behavior:"smooth", block:"center" });
  }
  return ok;
}

document.addEventListener("DOMContentLoaded", () => {

  if(!getLead()){
    window.location.href = "../index.html";
    return;
  }

  restore();

  document.querySelectorAll("input[type=radio]").forEach(i => {
    i.addEventListener("change", () => save(i.name, i.value));
  });

  document.getElementById("btnNext").addEventListener("click", () => {
    if(!validate()) return;
    window.location.href = "page2.html";
  });
});
</script>

</body>
</html>
