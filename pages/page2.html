<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Quem sou eu ‚Äî Passo 2</title>

<style>
:root{
  --accent:#f07a00;
  --bg:#f6f7fb;
  --card:#ffffff;
  --bd:#e7e7e7;
  --text:#111;
  --muted:#666;
}
body{
  margin:0;
  font-family:Arial,sans-serif;
  background:var(--bg);
  color:var(--text);
}
.wrap{
  max-width:960px;
  margin:auto;
  padding:16px;
}
.card{
  background:var(--card);
  border-radius:16px;
  padding:16px;
  box-shadow:0 6px 20px rgba(0,0,0,.06);
}
h1{margin:0 0 6px}
.muted{color:var(--muted);font-size:14px;line-height:1.4}

.step{margin:12px 0}
.bar{
  height:10px;
  background:#e9e9e9;
  border-radius:999px;
  overflow:hidden;
  margin-top:6px;
}
.fill{
  height:100%;
  width:50%;
  background:var(--accent);
}

.q{
  border:1px solid var(--bd);
  border-radius:14px;
  padding:12px;
  margin:12px 0;
}
.qtitle{
  font-weight:700;
  margin-bottom:8px;
}
.qtitle span{
  color:#888;
  margin-right:6px;
}

.opt{
  display:block;
  border:1px solid var(--bd);
  border-radius:12px;
  padding:12px;
  margin:6px 0;
  cursor:pointer;
  background:#fafafa;
}
.opt input{
  margin-right:10px;
  transform:scale(1.1);
}

.actions{
  display:flex;
  gap:10px;
  margin-top:16px;
}
.btn{
  padding:14px;
  border-radius:12px;
  border:0;
  font-weight:700;
  cursor:pointer;
}
.btn-outline{
  background:#fff;
  border:1px solid var(--bd);
}
.btn-primary{
  background:var(--accent);
  color:#fff;
  flex:1;
}
</style>
</head>

<body>
<div class="wrap">
<div class="card">

<h1>Quem sou eu</h1>
<p class="muted">
Agora foque no que te incomoda, te tensiona ou mexe com voc√™ por dentro.
</p>

<div class="step">
<b>Passo 2 de 4 ‚Äî Medos e tens√µes</b>
<div class="bar"><div class="fill"></div></div>
</div>

<form id="formP2">

<!-- 1 -->
<div class="q">
  <div class="qtitle"><span>1.</span>Eu fico mais desconfort√°vel quando:</div>
  <label class="opt"><input type="radio" name="P2_01" value="A"> Algo est√° errado ou injusto</label>
  <label class="opt"><input type="radio" name="P2_01" value="B"> N√£o sou valorizado(a)</label>
  <label class="opt"><input type="radio" name="P2_01" value="C"> Me sinto sem liberdade</label>
</div>

<!-- 2 -->
<div class="q">
  <div class="qtitle"><span>2.</span>O que mais me gera tens√£o √©:</div>
  <label class="opt"><input type="radio" name="P2_02" value="A"> Falta de padr√£o e organiza√ß√£o</label>
  <label class="opt"><input type="radio" name="P2_02" value="B"> Falta de progresso</label>
  <label class="opt"><input type="radio" name="P2_02" value="C"> Excesso de controle</label>
</div>

<!-- 3 -->
<div class="q">
  <div class="qtitle"><span>3.</span>Eu me frustro quando:</div>
  <label class="opt"><input type="radio" name="P2_03" value="A"> Vejo descuido</label>
  <label class="opt"><input type="radio" name="P2_03" value="B"> Meu esfor√ßo n√£o √© visto</label>
  <label class="opt"><input type="radio" name="P2_03" value="C"> Invadem meu espa√ßo</label>
</div>

<!-- 4 -->
<div class="q">
  <div class="qtitle"><span>4.</span>Em situa√ß√µes dif√≠ceis, eu costumo:</div>
  <label class="opt"><input type="radio" name="P2_04" value="A"> Corrigir o que est√° errado</label>
  <label class="opt"><input type="radio" name="P2_04" value="B"> Provar meu valor</label>
  <label class="opt"><input type="radio" name="P2_04" value="C"> Me afastar</label>
</div>

<!-- 5 -->
<div class="q">
  <div class="qtitle"><span>5.</span>Eu me sinto inseguro(a) quando:</div>
  <label class="opt"><input type="radio" name="P2_05" value="A"> N√£o h√° justi√ßa</label>
  <label class="opt"><input type="radio" name="P2_05" value="B"> N√£o sei se estou indo bem</label>
  <label class="opt"><input type="radio" name="P2_05" value="C"> Me pressionam demais</label>
</div>

<div class="actions">
  <button type="button" class="btn btn-outline" onclick="location.href='page1.html'">
    Voltar
  </button>
  <button type="button" id="btnNext" class="btn btn-primary">
    Continuar
  </button>
</div>

</form>
</div>
</div>

<script>
const KEY="respostas";

/* üîí Prote√ß√£o de fluxo */
function getList(){
  try{ return JSON.parse(localStorage.getItem(KEY)) || []; }
  catch{ return []; }
}
function setList(l){ localStorage.setItem(KEY, JSON.stringify(l)); }

if(getList().length === 0){
  window.location.href = "/";
}

/* Save */
function save(p,a){
  const l=getList();
  const i=l.findIndex(x=>x.pergunta===p);
  if(i>=0) l[i].alternativa=a;
  else l.push({pergunta:p,alternativa:a});
  setList(l);
}

/* Restore */
function restore(){
  getList().forEach(r=>{
    const el=document.querySelector(
      `input[name="${r.pergunta}"][value="${r.alternativa}"]`
    );
    if(el) el.checked=true;
  });
}

/* Validate */
function validate(){
  const names=[...new Set(
    [...document.querySelectorAll('input[type=radio]')].map(i=>i.name)
  )];
  const ok=names.every(n=>document.querySelector(`input[name="${n}"]:checked`));
  if(!ok) alert("Responda todas as quest√µes para continuar.");
  return ok;
}

document.addEventListener("DOMContentLoaded",()=>{
  restore();

  document.querySelectorAll("input[type=radio]").forEach(i=>{
    i.addEventListener("change",()=>save(i.name,i.value));
  });

  document.getElementById("btnNext").onclick=()=>{
    if(!validate()) return;
    location.href="page3.html";
  };
});
</script>

</body>
</html>
