<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Quem sou eu — Página 5</title>

  <link rel="stylesheet" href="../styles.css" />
  <script src="../script.js"></script>

  <style>
    .page-title{font-size:28px;margin:12px 0 10px;}
    .page-sub{margin:0 0 12px;color:#444;line-height:1.5;}
    .hint{font-size:14px;color:#444;margin:0 0 10px;}

    .progress-container{width:100%;height:10px;background:#e6e6e6;border-radius:10px;margin:18px 0;overflow:hidden;}
    .progress-bar{height:100%;background:#E57E25;width:95%;}

    .back-link{display:inline-block;margin:8px 0;color:#0F2B5B;text-decoration:none;}

    .grid{
      display:grid;
      grid-template-columns:repeat(3, 1fr);
      gap:14px;
      margin-top:14px;
    }

    .chip{
      background:#fff;
      border:1px solid #e7e7e7;
      border-radius:14px;
      padding:16px 14px;
      box-shadow:0 4px 12px rgba(0,0,0,.06);
      cursor:pointer;
      user-select:none;
      transition:.15s;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      min-height:56px;
    }
    .chip:hover{border-color:#cfcfcf;background:#fafafa;}

    .chip .text{
      font-size:15px;
      color:#222;
      line-height:1.2;
      font-weight:600;
    }

    .chip .dot{
      width:18px;height:18px;border-radius:50%;
      border:2px solid #c9c9c9;
      flex:0 0 18px;
      position:relative;
      background:#fff;
    }

    .chip.selected{
      border-color:#E57E25;
      background:#fff7ef;
      box-shadow:0 6px 14px rgba(229,126,37,.18);
    }
    .chip.selected .dot{
      border-color:#E57E25;
    }
    .chip.selected .dot::after{
      content:"";
      position:absolute;
      inset:3px;
      border-radius:50%;
      background:#E57E25;
    }

    .finish-btn{
      margin-top:20px;
      background:#E57E25;
      color:#fff;
      padding:14px;
      width:100%;
      border:none;
      border-radius:12px;
      font-size:16px;
      cursor:pointer;
    }
    .finish-btn:hover{background:#cf6d1f;}

    @media(max-width: 980px){
      .grid{grid-template-columns:repeat(2, 1fr);}
    }
    @media(max-width: 560px){
      .grid{grid-template-columns:1fr;}
    }
  </style>
</head>

<body>
  <div class="container">
    <h1 class="page-title">Quem sou eu</h1>
    <p class="page-sub">Você se considera uma pessoa...</p>
    <p class="hint">Clique em <b>Verdadeiro</b> caso você se identifique com a frase de cada box!</p>

    <div class="progress-container"><div class="progress-bar"></div></div>

    <a class="back-link" href="page4.html">← Voltar</a>

    <div class="grid" id="chipsGrid"></div>

    <button class="finish-btn" onclick="finalizarTeste()">Finalizar</button>
  </div>

  <script>
    // Lista exata da sua Page 5 (cada item vale 1 se selecionado)
    const PAGE5_ITEMS = [
      "Comprometido",
      "Original",
      "Positivo",
      "Harmonioso, discreto e tranquilo",
      "Determinado",
      "Inovador",
      "Voluntarioso",
      "Intenso",
      "Harmônico",
      "Descomplicado",
      "Controlador",
      "Ambicioso",
      "Atencioso e colaborador",
      "Desapegado",
      "Gosto de liberdade",
      "Sonhador",
      "Sensível",
      "Apreensivo",
      "Desafiador",
      "Simpático",
      "Autonomo",
      "Faço o que é certo ser feito",
      "Atualizado",
      "Agitado",
      "Criativo e sei improvisar",
      "As vezes distante",
      "Incansável",
      "Comprometido",
      "Reservado",
      "Esforçado",
      "Simples",
      "Criativo e veloz",
      "Cativante, transparente",
      "Sintonizado com o mercado",
      "Questionador",
      "Tranquilo",
      "Preocupado"
    ];

    // prefixo das chaves pra não conflitar com outras páginas
    const KEY_PREFIX = "P5_";

    function getRespostas() {
      return JSON.parse(localStorage.getItem("respostas") || "{}");
    }

    function setRespostas(obj) {
      localStorage.setItem("respostas", JSON.stringify(obj));
    }

    // Page 5: salvar 1/0 por item (true/false)
    function toggleP5(index) {
      const respostas = getRespostas();
      const key = KEY_PREFIX + String(index+1).padStart(2,"0");
      const current = respostas[key] === 1 ? 1 : 0;
      const next = current === 1 ? 0 : 1;
      respostas[key] = next;
      setRespostas(respostas);
      render();
    }

    function isSelected(index) {
      const respostas = getRespostas();
      const key = KEY_PREFIX + String(index+1).padStart(2,"0");
      return respostas[key] === 1;
    }

    function render() {
      const grid = document.getElementById("chipsGrid");
      grid.innerHTML = "";

      PAGE5_ITEMS.forEach((text, i) => {
        const chip = document.createElement("div");
        chip.className = "chip" + (isSelected(i) ? " selected" : "");
        chip.onclick = () => toggleP5(i);

        const span = document.createElement("div");
        span.className = "text";
        span.textContent = text;

        const dot = document.createElement("div");
        dot.className = "dot";

        chip.appendChild(span);
        chip.appendChild(dot);
        grid.appendChild(chip);
      });
    }

    function finalizarTeste() {
      // aqui a gente só envia pra página de resultado final por enquanto
      // (depois conectamos o cálculo do eneagrama)
      window.location.href = "../resultado.html";
    }

    render();
  </script>
</body>
</html>
