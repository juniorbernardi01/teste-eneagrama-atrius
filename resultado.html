<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Quem sou eu — Resultado</title>

  <style>
    :root{
      --bg:#f3f5f8;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#64748b;
      --border:#e5e7eb;
      --shadow:0 12px 34px rgba(15,23,42,.10);
      --accent:#f07a00;
      --accent2:#0b2a5b;

      /* Paleta por tipo */
      --t1:#9ca3af;   /* Cinza */
      --t2:#22c55e;   /* Verde */
      --t3:#d4af37;   /* Ouro */
      --t4:#7c3aed;   /* Roxo */
      --t5:#0f172a;   /* Azul escuro */
      --t6:#8b6b4a;   /* Terroso */
      --t7:#f97316;   /* Laranja */
      --t8:#111827;   /* Preto/força */
      --t9:#38bdf8;   /* Azul céu */

      --soft:#fff6ee;
      --softBorder:rgba(240,122,0,.35);
    }

    *{ box-sizing:border-box }
    body{
      margin:0;
      font-family: Arial, Helvetica, sans-serif;
      background:var(--bg);
      color:var(--text);
    }

    .wrap{
      max-width:1150px;
      margin:0 auto;
      padding:18px 16px 40px;
    }

    .header{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:16px;
      margin-bottom:14px;
    }
    .title h1{
      margin:0;
      font-size:44px;
      letter-spacing:-.5px;
    }
    .title p{
      margin:6px 0 0;
      color:var(--muted);
      font-size:14px;
    }

    .gridTop{
      display:grid;
      grid-template-columns: 1.6fr 1fr;
      gap:16px;
      align-items:start;
    }

    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:18px;
      box-shadow:var(--shadow);
      padding:18px;
    }

    .card h2{
      margin:0 0 8px;
      font-size:18px;
    }

    .topArea{
      display:grid;
      grid-template-columns: 1fr 320px;
      gap:14px;
      align-items:stretch;
      margin-top:12px;
    }

    .topList{
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    .topItem{
      border:1px solid var(--border);
      border-radius:14px;
      padding:14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      background:#fff;
      position:relative;
      overflow:hidden;
    }

    .topItem .left{
      display:flex;
      flex-direction:column;
      gap:4px;
      z-index:1;
    }

    .rankLine{
      font-weight:900;
      font-size:16px;
      color:#0b2a5b;
      display:flex;
      align-items:center;
      gap:10px;
    }

    .badge{
      width:10px;
      height:10px;
      border-radius:999px;
      display:inline-block;
      border:1px solid rgba(0,0,0,.18);
    }

    .typeName{
      font-weight:800;
      font-size:13px;
      color:#0f172a;
    }

    .desc{
      font-size:13px;
      color:#475569;
      line-height:1.35;
      max-width:520px;
    }

    .score{
      font-weight:900;
      font-size:22px;
      color:#0f172a;
      min-width:56px;
      text-align:right;
      z-index:1;
    }

    .pieCard{
      border:1px solid var(--border);
      border-radius:14px;
      background:#fff;
      padding:12px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      gap:10px;
    }
    .pieHint{
      font-size:12px;
      color:var(--muted);
      line-height:1.35;
    }

    .actionsCard{
      background:var(--soft);
      border:1px solid var(--softBorder);
      border-radius:18px;
      padding:18px;
      box-shadow:var(--shadow);
    }

    .actionsCard h2{
      margin:0 0 6px;
      font-size:18px;
    }

    .actionsCard p{
      margin:0 0 12px;
      color:#475569;
      font-size:13px;
      line-height:1.35;
    }

    .btnRow{
      display:flex;
      gap:10px;
      margin:10px 0 14px;
      flex-wrap:wrap;
    }

    .btn{
      padding:12px 14px;
      border-radius:14px;
      font-weight:900;
      border:0;
      cursor:pointer;
      font-size:13px;
    }
    .btnOutline{
      background:#fff;
      border:1px solid rgba(15,23,42,.10);
      color:#0f172a;
    }
    .btnPrimary{
      background:var(--accent);
      color:#fff;
      flex:1;
      min-width:160px;
    }

    .divider{
      height:1px;
      background:rgba(15,23,42,.12);
      margin:14px 0;
    }

    .smallTitle{
      font-weight:900;
      margin:0 0 6px;
      color:#0f172a;
    }

    .quick{
      font-size:13px;
      color:#334155;
      line-height:1.35;
    }

    .section{
      margin-top:16px;
    }
    .section h3{
      margin:0 0 8px;
      font-size:20px;
      letter-spacing:-.2px;
    }
    .section p{
      margin:0;
      color:#334155;
      font-size:14px;
      line-height:1.45;
    }

    .gridBottom{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:16px;
      margin-top:14px;
    }

    .listBox{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:18px;
      box-shadow:var(--shadow);
      padding:16px;
    }
    .listBox h4{
      margin:0 0 10px;
      font-size:16px;
      font-weight:900;
      color:#0f172a;
    }
    ul{
      margin:0;
      padding-left:18px;
      color:#0f172a;
      font-size:14px;
      line-height:1.6;
    }
    li{ margin:4px 0; }

    .error{
      display:none;
      background:#fff7f7;
      border:1px solid rgba(220,38,38,.25);
      color:#b91c1c;
      border-radius:14px;
      padding:12px;
      margin-top:12px;
      font-size:13px;
      line-height:1.35;
    }

    @media (max-width: 980px){
      .title h1{ font-size:36px; }
      .gridTop{ grid-template-columns: 1fr; }
      .topArea{ grid-template-columns:1fr; }
    }
    @media (max-width: 520px){
      .title h1{ font-size:30px; }
      .topItem{ padding:12px; }
      .desc{ font-size:12.5px; }
      .gridBottom{ grid-template-columns:1fr; }
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="header">
      <div class="title">
        <h1>Quem sou eu</h1>
        <p>Abaixo está o seu resultado com base nas respostas do formulário.</p>
      </div>
    </div>

    <div class="gridTop">
      <!-- LEFT -->
      <div class="card">
        <h2>Sua tríade principal (Top 3)</h2>
        <div style="color:var(--muted); font-size:13px;">Os 3 tipos mais altos (ordem decrescente).</div>

        <div class="topArea">
          <div>
            <div id="topList" class="topList"></div>
            <div id="errBox" class="error"></div>
          </div>

          <div class="pieCard">
            <div class="pieHint">Proporção dos 3 tipos mais altos.</div>
            <div id="pieWrap" style="display:flex;justify-content:center;align-items:center;"></div>
          </div>
        </div>
      </div>

      <!-- RIGHT -->
      <div class="actionsCard">
        <h2>Ações</h2>
        <p>Você pode voltar, ou refazer o teste do zero.</p>

        <div class="btnRow">
          <button class="btn btnOutline" id="btnVoltar">Voltar</button>
          <button class="btn btnPrimary" id="btnRefazer">Refazer teste</button>
        </div>

        <div class="divider"></div>

        <div class="smallTitle">Resumo rápido</div>
        <div class="quick" id="quickResumo">Carregando…</div>
      </div>
    </div>

    <div class="section">
      <h3>Como você tende a funcionar</h3>
      <p id="comoFunciona">Carregando…</p>
    </div>

    <div class="gridBottom">
      <div class="listBox">
        <h4>Pontos fortes</h4>
        <ul id="listaFortes"></ul>
      </div>

      <div class="listBox">
        <h4>Pontos a melhorar</h4>
        <ul id="listaMelhorar"></ul>
      </div>
    </div>
  </div>

<script>
  const RESPOSTAS_KEY = "respostas";
  const MATRIZ_URL = "/data/matriz.json";

  function getCSS(varName){
    return getComputedStyle(document.documentElement).getPropertyValue(varName).trim();
  }

  const TYPE_COLORS = {
    1: getCSS("--t1"),
    2: getCSS("--t2"),
    3: getCSS("--t3"),
    4: getCSS("--t4"),
    5: getCSS("--t5"),
    6: getCSS("--t6"),
    7: getCSS("--t7"),
    8: getCSS("--t8"),
    9: getCSS("--t9")
  };

  const TIPOS = {
    1: { nome: "Perfeccionista / Reformador", curta: "Busca fazer o correto, melhorar padrões e evitar erros." },
    2: { nome: "Prestativo / Cuidador",       curta: "Busca ajudar, ser necessário e criar conexão com pessoas." },
    3: { nome: "Realizador",                 curta: "Busca alcançar resultados, ser reconhecido e vencer desafios." },
    4: { nome: "Individualista",             curta: "Busca autenticidade, profundidade e identidade própria." },
    5: { nome: "Investigador",               curta: "Busca compreender, dominar assuntos e preservar energia." },
    6: { nome: "Leal",                       curta: "Busca segurança, previsibilidade e confiança." },
    7: { nome: "Entusiasta",                 curta: "Busca opções, liberdade, experiências e leveza." },
    8: { nome: "Desafiador",                 curta: "Busca autonomia, força e proteção do seu território." },
    9: { nome: "Pacificador",                curta: "Busca harmonia, estabilidade e evitar conflitos." }
  };

  // ===== Textos-base por tipo (para montar fortes/fracos automaticamente) =====
  const TYPE_STRENGTHS = {
    1:["Ética e senso de justiça","Organização e disciplina","Padrão de qualidade elevado","Consistência e responsabilidade","Melhoria contínua"],
    2:["Empatia e acolhimento","Facilidade de relacionamento","Colaboração e serviço","Motiva e apoia pessoas","Sensibilidade ao clima do ambiente"],
    3:["Foco em metas e execução","Energia e produtividade","Liderança e influência","Adaptabilidade para fazer acontecer","Mentalidade de performance"],
    4:["Autenticidade e profundidade","Criatividade e originalidade","Percepção de nuances emocionais","Conexão com propósito","Expressão e estética"],
    5:["Pensamento analítico","Aprendizado rápido","Foco profundo e autonomia","Decisão racional sob pressão","Visão de padrões e simplificação"],
    6:["Lealdade e confiabilidade","Planejamento e prevenção de riscos","Senso de equipe","Coragem prática em crise","Cria processos e segurança"],
    7:["Otimismo e energia","Geração de ideias","Flexibilidade e adaptação","Comunicação leve e inspiradora","Enxerga oportunidades"],
    8:["Firmeza e presença","Protege pessoas e limites","Coragem para confronto","Decisão rápida","Resiliência sob pressão"],
    9:["Calma e estabilidade","Mediação de conflitos","Escuta e diplomacia","Visão ampla e bom senso","Constância quando engajado"]
  };

  const TYPE_WEAKNESSES = {
    1:["Rigidez e dificuldade com erro","Autocrítica/crítica excessiva","Impaciência com lentidão","Cobrança alta e pouca leveza","Dificuldade em delegar"],
    2:["Dizer não / limites","Buscar aprovação","Frustrar sem reconhecimento","Ajudar com expectativa","Negligenciar a si"],
    3:["Cobrança e pressa","Confundir valor com desempenho","Excesso de imagem/controle","Dificuldade de descansar","Competitividade que tensiona"],
    4:["Oscilação emocional","Comparação e sensação de falta","Perder ação prática","Isolamento","Dificuldade com rotina"],
    5:["Distanciamento emocional","Analisar demais e travar","Dificuldade em pedir ajuda","Postergar ação","Comunicação seca sob pressão"],
    6:["Ansiedade e antecipação negativa","Dúvida e necessidade de garantias","Desconfiança/testar confiança","Oscilar medo e confronto","Dificuldade de decidir sob pressão"],
    7:["Dispersão e não concluir","Evitar desconforto","Impulsividade","Superficialidade por excesso de estímulo","Dificuldade com disciplina"],
    8:["Tom duro e impaciência","Controlar demais","Evitar vulnerabilidade","Reatividade a ameaça/injustiça","Intensidade 'tudo ou nada'"],
    9:["Procrastinação/inércia","Evitar conflito e engolir","Dificuldade em priorizar","Desconectar de si","Acomodação"]
  };

  // ===== SEC_MOD COMPLETO =====
  /* Colei aqui o SEC_MOD que te enviei acima (mesmo conteúdo) */
  const SEC_MOD = {
  1: {
    2: {
      "title": "Autoconfiança / Orgulho",
      "text": "A Autoconfiança faz o Persistente se perceber como alguém íntegro, dedicado e acima da média. “Pelo menos eu faço o certo — diferente da maioria.”"
    },
    3: {
      "title": "Desempenho / Vaidade",
      "text": "O Desempenho torna o Persistente mais eficiente e focado em resultados. Ele tenta provar seu valor por meio de produtividade e excelência. “Eu faço melhor do que qualquer um. Me deixa fazer.”"
    },
    4: {
      "title": "Autenticidade / Inveja",
      "text": "A Autenticidade aproxima o Persistente do ideal de beleza e perfeição. Ele se torna mais sensível às nuances e mais exigente com estética e refinamento. “Se for pra fazer, tem que ser impecável — bonito e certo.”"
    },
    5: {
      "title": "Razão / Avareza",
      "text": "A Razão torna o Persistente mais contido, racional e estratégico. Ele observa mais antes de agir e tenta controlar a impulsividade pela mente. “Vou pensar bem antes. Não vou me expor à toa.”"
    },
    6: {
      "title": "Prudência / Medo",
      "text": "A Prudência aumenta a preocupação com consequências e riscos. O Persistente fica mais cauteloso e ansioso, buscando garantias de que está no caminho certo. “E se eu estiver errado? Preciso ter certeza.”"
    },
    7: {
      "title": "Entusiasmo / Gula",
      "text": "O Entusiasmo dá energia e leveza ao Persistente, que tenta aliviar a tensão interna com otimismo e planos. “Dá pra fazer certo e ainda curtir um pouco — vai dar bom.”"
    },
    8: {
      "title": "Comando / Luxúria",
      "text": "O Comando intensifica a força e a assertividade do Persistente. Ele se torna mais duro e combativo, defendendo o certo com firmeza. “Se eu não botar ordem, ninguém bota.”"
    },
    9: {
      "title": "Mediação / Indolência",
      "text": "A Mediação suaviza a rigidez do Persistente. Ele busca paz e harmonia para evitar o estresse da cobrança interna, mas pode procrastinar decisões. “Deixa assim por enquanto… depois eu ajusto.”"
    }
  },
  2: {
    1: {
      "title": "Disciplina / Raiva",
      "text": "A Disciplina torna o Confiante mais exigente e crítico. Ele começa a cobrar mais do outro e de si, com impaciência e insistência intransigente. “Não quero nem saber — se eu disse que vai ser, vai ser.”"
    },
    3: {
      "title": "Desempenho / Vaidade",
      "text": "O Desempenho faz o Confiante buscar aprovação por resultados. Ele tenta conquistar valor sendo eficiente e admirado. “Eu vou fazer acontecer. Quero que vejam o quanto eu sou bom nisso.”"
    },
    4: {
      "title": "Autenticidade / Inveja",
      "text": "A Autenticidade torna o Confiante mais emocional e profundo. Ele quer ser visto de forma única e especial. “Eu não quero só ser útil — quero ser insubstituível.”"
    },
    5: {
      "title": "Razão / Avareza",
      "text": "A Razão dá frieza e contenção ao Confiante. Ele começa a se recolher e pensar mais, evitando se expor tanto emocionalmente. “Melhor eu observar antes… não vou me doar pra quem não merece.”"
    },
    6: {
      "title": "Prudência / Medo",
      "text": "A Prudência aumenta insegurança e medo de rejeição. O Confiante fica mais dependente de confirmação e preocupado com o que o outro pensa. “Será que gostam de mim de verdade? Será que eu exagerei?”"
    },
    7: {
      "title": "Entusiasmo / Gula",
      "text": "O Entusiasmo dá leveza e agilidade ao Confiante. Ele se anima com possibilidades e tenta manter o clima bom. “Vai dar certo! Vamos fazer um plano melhor e seguir.”"
    },
    8: {
      "title": "Comando / Luxúria",
      "text": "O Comando deixa o Confiante mais impositivo e protetor. Ele se torna mais direto e pode controlar o ambiente para garantir sua posição. “Eu sei o que é melhor. Vamos fazer do meu jeito.”"
    },
    9: {
      "title": "Mediação / Indolência",
      "text": "A Mediação deixa o Confiante mais conciliador. Ele evita conflito para preservar vínculo, mas pode engolir incômodos. “Tudo bem… deixa assim. Não vale brigar por isso.”"
    }
  },
  3: {
    1: {
      "title": "Disciplina / Raiva",
      "text": "A Disciplina torna o Realizador mais rígido, centralizador e impaciente. Ele tenta compensar falhas com esforço e trabalho incansável. “Se ninguém vai resolver, então me dá que eu resolvo!”"
    },
    2: {
      "title": "Autoconfiança / Orgulho",
      "text": "A Autoconfiança afirma internamente a imagem idealizada. O Realizador se convence de que nasceu para vencer — e que pode tudo. “Sim, eu posso! Eu sou feito pra grandes coisas.”"
    },
    4: {
      "title": "Autenticidade / Inveja",
      "text": "A Autenticidade ajusta o olhar do Realizador, que começa a se preocupar com a forma e não só com o resultado, buscando diferenciação com esmero e refinamento. “Não quero só entregar — quero fazer algo que ninguém mais conseguiria.”"
    },
    5: {
      "title": "Razão / Avareza",
      "text": "A Razão gera contenção e estratégia, tornando o Realizador mais frio, analítico e seletivo — com menos exposição emocional. “Se eu abrir demais o jogo, perco vantagem. Melhor pensar primeiro.”"
    },
    6: {
      "title": "Prudência / Medo",
      "text": "A Prudência ativa a dúvida e a ansiedade por irrelevância. O Realizador redobra os esforços, mas com medo de falhar ou sumir do radar. Pode se tornar menos ousado por buscar mais garantias. “Não tenho tempo a perder — se eu parar, sou esquecido!”"
    },
    7: {
      "title": "Entusiasmo / Gula",
      "text": "O Entusiasmo traz imediatismo e fome de progresso. O Realizador vira um acelerador de resultados, buscando atalhos para subir rápido. “Tempo é dinheiro! Se tem um jeito mais rápido, eu vou achar.”"
    },
    8: {
      "title": "Comando / Luxúria",
      "text": "O Comando adiciona intensidade e agressividade. O Realizador se torna impositivo, ambicioso ao extremo e avassalador com quem não acompanha seu ritmo. “Ou você sobe comigo, ou sai da frente!”"
    },
    9: {
      "title": "Mediação / Indolência",
      "text": "A Mediação suaviza a impulsividade do Realizador. Ele aparenta serenidade, mas pode esconder frustração por não estar avançando. “Tá tudo certo… por fora. Mas por dentro, sinto que deveria estar mais longe.”"
    }
  },
  4: {
    1: {
      "title": "Disciplina / Raiva",
      "text": "A Disciplina torna o Original mais exigente consigo, tentando controlar a dor interna com rigidez e cobranças. “Eu tenho que dar um jeito nisso — não posso ser assim.”"
    },
    2: {
      "title": "Autoconfiança / Orgulho",
      "text": "A Autoconfiança faz o Original acreditar que é especial e incompreendido. Ele busca validação da sua singularidade. “Ninguém sente como eu sinto. Eu sou diferente.”"
    },
    3: {
      "title": "Desempenho / Vaidade",
      "text": "O Desempenho faz o Original querer provar valor e ser reconhecido. Ele tenta compensar insegurança com performance e imagem. “Se eu mostrar o meu talento, vão me admirar.”"
    },
    5: {
      "title": "Razão / Avareza",
      "text": "A Razão torna o Original mais contido e introspectivo. Ele racionaliza sentimentos e se isola para entender o que está sentindo. “Vou me afastar pra pensar… preciso entender isso.”"
    },
    6: {
      "title": "Prudência / Medo",
      "text": "A Prudência aumenta a insegurança e medo de não pertencer. O Original fica mais desconfiado e preocupado com rejeição. “E se eu estiver sendo deixado de lado? E se não gostarem de mim?”"
    },
    7: {
      "title": "Entusiasmo / Gula",
      "text": "O Entusiasmo tenta trazer leveza. O Original busca distrações e possibilidades para escapar da dor. “Talvez eu só precise viver mais… mudar de ares, fazer algo novo.”"
    },
    8: {
      "title": "Comando / Luxúria",
      "text": "O Comando dá força e confrontação. O Original se torna mais reativo e intenso quando ferido. “Eu não vou aceitar isso. Se me machucou, eu vou dizer.”"
    },
    9: {
      "title": "Mediação / Indolência",
      "text": "A Mediação suaviza o drama interno e busca paz. O Original pode evitar confrontos para não piorar a dor, mas acumula ressentimento. “Deixa… não quero confusão, só queria ficar bem.”"
    }
  },
  5: {
    1: {
      "title": "Disciplina / Raiva",
      "text": "A Disciplina torna o Planejador mais perfeccionista e direto. Ele aumenta cobrança, quer controle e eficiência. “Eu não consigo trabalhar assim — vamos organizar isso direito.”"
    },
    2: {
      "title": "Autoconfiança / Orgulho",
      "text": "A Autoconfiança faz o Planejador acreditar que sabe mais e que sua visão é superior. “Se me deixarem fazer, eu resolvo. Eu entendo isso melhor.”"
    },
    3: {
      "title": "Desempenho / Vaidade",
      "text": "O Desempenho torna o Planejador mais produtivo e competitivo. Ele quer reconhecimento por competência. “Quero que vejam que eu entrego melhor do que qualquer um.”"
    },
    4: {
      "title": "Autenticidade / Inveja",
      "text": "A Autenticidade torna o Planejador mais sensível e ligado à estética/identidade. Ele pode sentir falta de algo e se comparar. “Sinto que tem algo diferente em mim… que ninguém entende.”"
    },
    6: {
      "title": "Prudência / Medo",
      "text": "A Prudência aumenta preocupação e vigilância. O Planejador busca garantias e pode ficar ansioso, revisando demais. “E se der errado? Preciso prever todas as variáveis.”"
    },
    7: {
      "title": "Entusiasmo / Gula",
      "text": "O Entusiasmo dá criatividade e curiosidade. O Planejador se anima com ideias e possibilidades, mas pode dispersar. “Olha quantas opções… dá pra fazer de vários jeitos!”"
    },
    8: {
      "title": "Comando / Luxúria",
      "text": "O Comando dá força e objetividade. O Planejador se torna mais direto, exigente e impositivo para proteger espaço e autonomia. “Eu preciso do meu espaço. Não me pressione.”"
    },
    9: {
      "title": "Mediação / Indolência",
      "text": "A Mediação deixa o Planejador mais calmo e tolerante. Ele evita conflito e mantém distância emocional, podendo procrastinar decisões difíceis. “Deixa pra depois… não é urgente agora.”"
    }
  },
  6: {
    1: {
      "title": "Disciplina / Raiva",
      "text": "A Disciplina faz o Prudente buscar regras externas e padrões rígidos como forma de se sentir seguro. Ele fica mais crítico e duro. “Se todo mundo seguisse o certo, nada daria errado.”"
    },
    2: {
      "title": "Autoconfiança / Orgulho",
      "text": "A Autoconfiança faz o Prudente se tornar mais protetor e confiante, tentando sustentar o grupo como base. “Eles precisam de mim. Eu vou segurar isso.”"
    },
    3: {
      "title": "Desempenho / Vaidade",
      "text": "O Desempenho faz o Prudente querer provar valor e ganhar confiança através de entregas e competência. “Se eu mostrar resultado, vão confiar em mim.”"
    },
    4: {
      "title": "Autenticidade / Inveja",
      "text": "A Autenticidade aproxima o Prudente de sentimentos profundos e insegurança de pertencimento. Ele pode se comparar e se sentir deslocado. “Por que eu não consigo ser como os outros?”"
    },
    5: {
      "title": "Razão / Avareza",
      "text": "A Razão torna o Prudente mais analítico e fechado. Ele se distancia emocionalmente para avaliar riscos com clareza. “Vou me calar e observar. Preciso entender antes.”"
    },
    7: {
      "title": "Entusiasmo / Gula",
      "text": "O Entusiasmo tenta aliviar o medo. O Prudente busca otimismo e planos, mas pode oscilar entre confiança e ansiedade. “Vai dar certo… mas e se não der?”"
    },
    8: {
      "title": "Comando / Luxúria",
      "text": "O Comando torna o Prudente mais confrontador e reativo. Ele pode atacar para se defender quando se sente ameaçado. “Se vierem pra cima, eu vou pra cima também.”"
    },
    9: {
      "title": "Mediação / Indolência",
      "text": "A Mediação suaviza a ansiedade do Prudente. Ele busca paz para estabilizar emoções, mas pode evitar decisões e ficar em espera. “Vamos deixar as coisas acalmarem… depois eu decido.”"
    }
  },
  7: {
    1: {
      "title": "Disciplina / Raiva",
      "text": "A Disciplina faz o Otimista ficar mais determinado e persistente até concluir o que deseja. Ele fica mais sério e exigente consigo. “Eu vou terminar isso. Doa o que doer.”"
    },
    2: {
      "title": "Autoconfiança / Orgulho",
      "text": "A Autoconfiança faz o Otimista se sentir mais carismático e necessário. Ele quer manter o clima alto e ser querido. “Eu levanto a energia — comigo aqui tudo melhora.”"
    },
    3: {
      "title": "Desempenho / Vaidade",
      "text": "O Desempenho faz o Otimista focar em conquista, status e reconhecimento. Ele vira um acelerador de metas. “Eu quero crescer rápido e aparecer pelo que eu faço.”"
    },
    4: {
      "title": "Autenticidade / Inveja",
      "text": "A Autenticidade aproxima o Otimista de emoções mais profundas. Ele busca significado e singularidade, podendo sentir insatisfação. “Quero algo que tenha mais sentido… não só diversão.”"
    },
    5: {
      "title": "Razão / Avareza",
      "text": "A Razão torna o Otimista mais contido e cerebral. Ele organiza ideias e planeja melhor, mas pode se distanciar emocionalmente. “Calma… deixa eu pensar antes de sair fazendo.”"
    },
    6: {
      "title": "Prudência / Medo",
      "text": "A Prudência faz o Otimista ficar mais ansioso e cauteloso. Ele pensa em riscos e perde espontaneidade. “E se der errado? Melhor garantir antes.”"
    },
    8: {
      "title": "Comando / Luxúria",
      "text": "O Comando deixa o Otimista mais intenso e direto. Ele quer liberdade e pode impor ritmo aos outros. “Eu vou fazer do meu jeito — vem comigo ou sai do caminho.”"
    },
    9: {
      "title": "Mediação / Indolência",
      "text": "A Mediação suaviza o excesso de estímulos. O Otimista busca tranquilidade e pode desacelerar, mas também evita desconforto. “Deixa leve… não quero estresse.”"
    }
  },
  8: {
    1: {
      "title": "Disciplina / Raiva",
      "text": "A Disciplina torna o Dominante mais detalhista e inflexível, podendo ser reativo quando contrariado. “Se é pra fazer, vai ser do jeito certo.”"
    },
    2: {
      "title": "Autoconfiança / Orgulho",
      "text": "A Autoconfiança faz o Dominante se sentir protetor e necessário. Ele quer cuidar do seu povo e garantir força do grupo. “Eu cuido dos meus. Ninguém mexe com a gente.”"
    },
    3: {
      "title": "Desempenho / Vaidade",
      "text": "O Desempenho torna o Dominante mais focado em vitória e status. Ele quer provar força por conquistas. “Eu vou ganhar. Quero ser o número 1.”"
    },
    4: {
      "title": "Autenticidade / Inveja",
      "text": "A Autenticidade aproxima o Dominante de sentimentos profundos. Ele pode revelar dor e querer respeito pela sua história. “Eu não sou só força. Eu passei por coisas que ninguém viu.”"
    },
    5: {
      "title": "Razão / Avareza",
      "text": "A Razão torna o Dominante mais estratégico e reservado. Ele observa e calcula antes de agir, mantendo controle emocional. “Vou pensar. Quando eu agir, vai ser certeiro.”"
    },
    6: {
      "title": "Prudência / Medo",
      "text": "A Prudência ativa vigilância e desconfiança. O Dominante fica ainda mais controlador para evitar vulnerabilidade. “Eu não confio fácil. Preciso garantir que não vão me passar pra trás.”"
    },
    7: {
      "title": "Entusiasmo / Gula",
      "text": "O Entusiasmo dá energia e ousadia. O Dominante busca intensidade e experiências, podendo acelerar demais. “Vamos logo. Eu quero mais — e quero agora.”"
    },
    9: {
      "title": "Mediação / Indolência",
      "text": "A Mediação suaviza a agressividade do Dominante. Ele tenta manter paz e evitar desgaste, mas pode engolir irritação e explodir depois. “Deixa… não vale a energia. Mas não me força.”"
    }
  },
  9: {
    1: {
      "title": "Disciplina / Raiva",
      "text": "A Disciplina torna o Harmonizador mais constante e firme. Ele ganha continuidade, sem agressividade, mas com constância. “Me deixa no meu tempo, mas eu vou até o fim.”"
    },
    2: {
      "title": "Autoconfiança / Orgulho",
      "text": "A Autoconfiança faz o Harmonizador se tornar mais acolhedor e necessário, buscando harmonia por vínculo. “Eu só quero que todo mundo fique bem.”"
    },
    3: {
      "title": "Desempenho / Vaidade",
      "text": "O Desempenho faz o Harmonizador buscar valor por entregas. Ele tenta ser visto e respeitado por resultados. “Se eu mostrar que eu faço, vão me levar a sério.”"
    },
    4: {
      "title": "Autenticidade / Inveja",
      "text": "A Autenticidade aproxima o Harmonizador de emoções profundas. Ele pode sentir tristeza, falta de identidade e comparação. “Às vezes eu sinto que eu não tenho lugar… que eu sou ‘qualquer um’.”"
    },
    5: {
      "title": "Razão / Avareza",
      "text": "A Razão torna o Harmonizador mais fechado e observador. Ele se distancia para evitar conflito e pensar melhor. “Vou ficar quieto… não quero confusão.”"
    },
    6: {
      "title": "Prudência / Medo",
      "text": "A Prudência aumenta ansiedade e preocupação com estabilidade. O Harmonizador fica mais inseguro e busca garantias. “E se tudo mudar? Eu preciso de segurança.”"
    },
    7: {
      "title": "Entusiasmo / Gula",
      "text": "O Entusiasmo traz leveza e energia ao Harmonizador. Ele fica mais animado e busca distrações para evitar desconforto. “Vamos fazer algo bom… não quero pensar nisso agora.”"
    },
    8: {
      "title": "Comando / Luxúria",
      "text": "O Comando dá força e assertividade ao Harmonizador. Ele se impõe quando passa do limite, podendo surpreender. “Chega. Agora eu vou falar.”"
    }
  }
};

</script>

<!-- ⚠️ IMPORTANTE:
     Eu não consigo duplicar o SEC_MOD duas vezes (já te mandei completo).
     Então: dentro do resultado.html, substitua TODO o bloco acima do SEC_MOD
     por:   const SEC_MOD = { ... }  (o mesmo que mandei no primeiro bloco)
-->
<script>
  // ===== Helpers =====
  function uniqTop(arr, max=8){
    const out=[]; const seen=new Set();
    for(const x of arr){
      const k=(x||"").toLowerCase().trim();
      if(!k || seen.has(k)) continue;
      seen.add(k); out.push(x);
      if(out.length>=max) break;
    }
    return out;
  }

  function getSec(primary, sec){
    const s = SEC_MOD?.[primary]?.[sec];
    if(!s) return null;
    return { title: s.title || "", text: s.text || "" };
  }

  function generateTriade(primary, secA, secB){
    const sA = getSec(primary, secA);
    const sB = getSec(primary, secB);

    const resumo = `Tipo ${primary} aparece como o mais provável, com influência de Tipo ${secA} e Tipo ${secB}.`;

    const parts = [];
    parts.push(`Seu tipo principal é o <b>Tipo ${primary}</b>.`);

    if(sA) parts.push(`Com influência do <b>Tipo ${secA}</b> (${sA.title}), você tende a: ${sA.text}`);
    else   parts.push(`Com influência do <b>Tipo ${secA}</b>, você tende a acionar padrões desse tipo quando pressionado(a).`);

    if(sB) parts.push(`Com influência do <b>Tipo ${secB}</b> (${sB.title}), você tende a: ${sB.text}`);
    else   parts.push(`Com influência do <b>Tipo ${secB}</b>, você tende a acionar padrões desse tipo quando pressionado(a).`);

    const fortes = uniqTop([
      ...(TYPE_STRENGTHS[primary]||[]),
      ...(TYPE_STRENGTHS[secA]||[]),
      ...(TYPE_STRENGTHS[secB]||[])
    ], 8);

    const melhorar = uniqTop([
      ...(TYPE_WEAKNESSES[primary]||[]),
      ...(TYPE_WEAKNESSES[secA]||[]),
      ...(TYPE_WEAKNESSES[secB]||[])
    ], 8);

    return { resumo, funciona: parts.join(" "), fortes, melhorar };
  }

  function getLocalJSON(key){
    try{ return JSON.parse(localStorage.getItem(key) || "null"); }
    catch{ return null; }
  }

  function showError(msg){
    const el = document.getElementById("errBox");
    el.style.display = "block";
    el.textContent = msg;
  }

  async function loadMatriz(){
    const res = await fetch(MATRIZ_URL, { cache: "no-store" });
    if(!res.ok) throw new Error("Não consegui carregar /data/matriz.json. Verifique se o arquivo existe na pasta /data.");
    return res.json();
  }

  function computeScore(respostas, matriz){
    const score = {1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0};
    respostas.forEach(r=>{
      const key = `${r.pergunta}_${r.alternativa}`;
      const w = matriz[key];
      if(!w) return;
      for(const t in w) score[t] += w[t];
    });
    return score;
  }

  function top3FromScore(score){
    return Object.entries(score)
      .map(([t,v])=>({ t:Number(t), v:Number(v) }))
      .sort((a,b)=>b.v-a.v)
      .slice(0,3);
  }

  function renderTop3(top3){
    const list = document.getElementById("topList");
    list.innerHTML = top3.map((it, idx)=>{
      const tipo = TIPOS[it.t];
      const rank = (idx+1) + "º — Tipo " + it.t;
      const color = TYPE_COLORS[it.t] || "#111827";

      return `
        <div class="topItem">
          <div class="left">
            <div class="rankLine">
              <span class="badge" style="background:${color}"></span>
              ${rank}
            </div>
            <div class="typeName">${tipo?.nome || ""}</div>
            <div class="desc">${tipo?.curta || ""}</div>
          </div>
          <div class="score">${it.v}</div>
        </div>
      `;
    }).join("");
  }

  // ===== PIE (SVG) =====
  function polarToCartesian(cx, cy, r, angleDeg){
    const rad = (angleDeg - 90) * Math.PI / 180.0;
    return { x: cx + (r * Math.cos(rad)), y: cy + (r * Math.sin(rad)) };
  }
  function arcPath(cx, cy, r, startAngle, endAngle){
    const start = polarToCartesian(cx, cy, r, endAngle);
    const end = polarToCartesian(cx, cy, r, startAngle);
    const largeArcFlag = (endAngle - startAngle) <= 180 ? "0" : "1";
    return `M ${cx} ${cy} L ${start.x} ${start.y} A ${r} ${r} 0 ${largeArcFlag} 0 ${end.x} ${end.y} Z`;
  }

  function renderPie(top3){
    const total = top3.reduce((s,x)=>s+x.v,0) || 1;
    let start = 0;
    const cx = 110, cy = 110, r = 92;

    const slices = top3.map((it)=>{
      const frac = it.v / total;
      const angle = frac * 360;
      const end = start + angle;
      const path = arcPath(cx, cy, r, start, end);
      start = end;
      return { t: it.t, v: it.v, path };
    });

    const svg = `
      <svg width="220" height="220" viewBox="0 0 220 220" aria-label="Gráfico de pizza">
        ${slices.map(s=>{
          const color = TYPE_COLORS[s.t] || "#111827";
          return `<path d="${s.path}" fill="${color}" stroke="white" stroke-width="3"></path>`;
        }).join("")}
        <circle cx="${cx}" cy="${cy}" r="${r}" fill="none" stroke="rgba(15,23,42,.10)" stroke-width="1"/>
      </svg>
    `;

    document.getElementById("pieWrap").innerHTML = svg;
  }

  function renderTriadeTexts(top3){
    const t1 = top3[0].t, t2 = top3[1].t, t3 = top3[2].t;
    const data = generateTriade(t1,t2,t3);

    document.getElementById("quickResumo").textContent = data.resumo;

    const n1 = TIPOS[t1]?.nome?.split(" / ")[0] || `Tipo ${t1}`;
    document.getElementById("comoFunciona").innerHTML =
      `Sua tríade principal é <b>${t1}-${t2}-${t3}</b>. Você combina o <b>${n1}</b> (dominante) com influências de <b>Tipo ${t2}</b> e <b>Tipo ${t3}</b>. ` + data.funciona;

    document.getElementById("listaFortes").innerHTML = (data.fortes||[]).map(x=>`<li>${x}</li>`).join("");
    document.getElementById("listaMelhorar").innerHTML = (data.melhorar||[]).map(x=>`<li>${x}</li>`).join("");
  }

  document.getElementById("btnVoltar").addEventListener("click", ()=>{
    window.location.href = "/pages/page4";
  });
  document.getElementById("btnRefazer").addEventListener("click", ()=>{
    window.location.href = "/";
  });

  (async function init(){
    try{
      const respostas = getLocalJSON(RESPOSTAS_KEY) || [];
      if(!Array.isArray(respostas) || respostas.length === 0){
        showError("Não encontrei respostas salvas. Volte e finalize o teste novamente.");
        document.getElementById("quickResumo").textContent = "Sem dados.";
        document.getElementById("comoFunciona").textContent = "Sem dados.";
        return;
      }

      const matriz = await loadMatriz();
      const score = computeScore(respostas, matriz);
      const top3 = top3FromScore(score);

      renderTop3(top3);
      renderPie(top3);
      renderTriadeTexts(top3);
    }catch(err){
      console.error(err);
      showError(err?.message || String(err));
      document.getElementById("quickResumo").textContent = "Erro ao carregar.";
      document.getElementById("comoFunciona").textContent = "Erro ao carregar.";
    }
  })();
</script>
</body>
</html>
